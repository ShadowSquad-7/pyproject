{% extends "base.html" %}

{% block title %}Currency Dashboard{% endblock %}

{% block content %}
<!-- –ü—Ä–æ—Ñ–∏–ª—å –∏–ª–∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤–æ–π—Ç–∏ -->
{% if user %}
    
    <!-- –ü–æ–∫–∞–∑–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
     <div class="header-container">
    <div class="head-elements">
        <aside class="profile-box">
            <p>Welcome, {{ user.email }}</p>
            <p><img src="/static/images/userimg.png" alt="User Icon" class="header-icon-u"></p>
        </aside>
        <div class="trade-box">
            <form action="/users/buy" method="get">
                <button type="submit" class="trade-btn">
                    <img src="/static/images/trade.png" class="trade-icon" alt="Trade">
                    Trade
                </button>
            </form>
        </div>
    </div>
    
    <!-- –ù–æ–≤—ã–π —Ä–∞—Å—Ç—è–≥–∏–≤–∞—é—â–∏–π—Å—è –±–ª–æ–∫ -->
    <div class="right-fill-block">
        <div class="fill-content">
            <h3 class="h5-f"><img src="/static/images/wallet.png" alt="User Icon" class="b-icon">Balance<img src="/static/images/wallet.png" alt="User Icon" class="b-icon"></h3>
            <div class="balance-grid">
            <div class="balance-column">
                <p>{{user.balance}} cookies</p>
                <p>{{user.btc_balance}} BTC</p>
                <p>{{user.usd_balance}} USD</p>
            </div>
            <div class="balance-column">
                <p>{{user.eur_balance}} EUR</p>
                <p>{{user.cny_balance}} CNY</p>
            </div>
        </div>
        </div>
    </div>
    
</div>
    
{% else %}

<div class="x">
    <h1>Welcome to Dashdoard</h1>
</div>
    <!-- –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤—Ö–æ–¥–∞ –∏–ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
    <!-- <aside class="profile-box">
    </aside> -->
{% endif %}
<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ª–æ–≥–∏–Ω–∞ -->
<div id="loginModal" class="modal hidden">
    <div class="modal-overlay" onclick="toggleModal('loginModal')"></div>
    <div class="modal-container">
        <form method="post" action="/users/login" class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Log in</h3>
            
            <div class="form-group">
                <input type="text" name="username" placeholder="Username" class="modal-input" required>
            </div>
            <div class="form-group">
                <input type="password" name="password" placeholder="Password" class="modal-input" required>
            </div>
            
            <div class="form-actions">
                <button type="submit" class="modal-submit-btn">
                    <img src="/static/images/login.png" alt="Login" class="header-icon">
                </button>
            </div>
            <button type="button" class="modal-close" onclick="toggleModal('loginModal')">
                    <img src="/static/images/close.png" alt="Close" class="header-icon">
                </button>
            </div>
            
            {% if login_error %}
                <div class="modal-error">
                    <img src="/static/images/error.png" alt="Error" class="header-icon-e">
                    <p>{{ login_error }}</p>
                </div>
            {% endif %}
        </form>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
 <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
<div id="registerModal" class="modal hidden">
    <div class="modal-overlay" onclick="toggleModal('registerModal')"></div>
    <div class="modal-container">
    <form method="post" action="/users/register" class="modal-content">
        <h3>Create account</h3>
        <input type="text" name="email" placeholder="Username" required>
        <input type="password" name="password" placeholder="Create password" required>
        
        <div class="form-actions">
                <button type="submit" class="modal-submit-btn">
                    <img src="/static/images/signup.png" alt="Sign Up" class="header-icon">
                </button>
            </div>


        <button type="button" class="modal-close" onclick="toggleModal('registerModal')">
                    <img src="/static/images/close.png" alt="Close" class="header-icon">
        </button>
        {% if register_error %}
            <div class="modal-error">
                    <img src="/static/images/error.png" alt="Error" class="header-icon-e">
                    <p>{{ register_error }}</p>
            </div>
        {% endif %}
    </form>
</div>
</div>


<!-- <div id="registerModal" class="modal hidden">
    <div class="modal-overlay" onclick="toggleModal('registerModal')"></div>
    <div class="modal-container">
        <form method="post" action="/users/register" class="modal-form">
            <div class="modal-header">
                <h3 class="modal-title">Create Account</h3>
                <button type="button" class="modal-close" onclick="toggleModal('registerModal')">
                    <img src="/static/images/close.png" alt="Close" class="header-icon">
                </button>
            </div>
            
            <div class="form-group">
                <input type="text" name="login" placeholder="Username" class="modal-input" required>
            </div>
            
            <div class="form-group">
                <input type="password" name="password" placeholder="Create Password" class="modal-input" required>
            </div>
            
            <div class="form-actions">
                <button type="submit" class="modal-submit-btn">
                    <img src="/static/images/signup.png" alt="Sign Up" class="header-icon">
                </button>
            </div>
            
            {% if register_error %}
                <div class="modal-error">
                    <img src="/static/images/error.png" alt="Error" class="header-icon-e">
                    <p>{{ register_error }}</p>
                </div>
            {% endif %}
        </form>
    </div>
</div> -->
<script src="/static/js/scripts.js"></script>
<div class="content-wrapper">
    <!-- –ë–ª–æ–∫ —Å –±–∞–ª–∞–Ω—Å–æ–º -->

    <!-- –ë–ª–æ–∫ —Å –≥—Ä–∞—Ñ–∏–∫–æ–º -->
    <div class="dashboard-block">
        <h2>Currency Exchange Rates</h2>
        <iframe 
            src="http://localhost:8050" 
            class="dashboard-iframe"
            title="Currency Dashboard"
        ></iframe>
    </div>  
</div>

<div class="currency-info-block">
        <h3 class="currency-info-title">
            <img src="/static/images/dash.png" alt="Info">
            –û –≤–∞–ª—é—Ç–∞—Ö
        </h3>
        
        <div class="currency-cards">
            <!-- USD -->
            <div class="currency-card usd">
                <div class="currency-header">
                    <span class="currency-flag">üá∫üá∏</span>
                    <h4>USD (–î–æ–ª–ª–∞—Ä –°–®–ê)</h4>
                </div>
                <p>–û—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –≤–∞–ª—é—Ç–∞ –º–∏—Ä–∞. –ö—É—Ä—Å USD/RUB –≤–∞–∂–µ–Ω –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –∏ —ç–∫—Å–ø–æ—Ä—Ç–∞.</p>
                <div class="currency-details">
                    <span>üîπ –í–ª–∏—è–µ—Ç –Ω–∞ –Ω–µ—Ñ—Ç—å</span>
                    <span>üîπ –ö–ª—é—á–µ–≤–∞—è —Å—Ç–∞–≤–∫–∞: 5.5%</span>
                </div>
            </div>

            <!-- EUR -->
            <div class="currency-card eur">
                <div class="currency-header">
                    <span class="currency-flag">üá™üá∫</span>
                    <h4>EUR (–ï–≤—Ä–æ)</h4>
                </div>
                <p>–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –≤–∞–ª—é—Ç–∞ 20 —Å—Ç—Ä–∞–Ω –ï–°. –í—Ç–æ—Ä–æ–π –ø–æ –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏ –≤–∞–ª—é—Ç–Ω—ã–π –∞–∫—Ç–∏–≤.</p>
                <div class="currency-details">
                    <span>üîπ –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –ï–¶–ë</span>
                    <span>üîπ –ö–ª—é—á–µ–≤–∞—è —Å—Ç–∞–≤–∫–∞: 4.5%</span>
                </div>
            </div>

            <!-- CNY -->
            <div class="currency-card cny">
                <div class="currency-header">
                    <span class="currency-flag">üá®üá≥</span>
                    <h4>CNY (–ö–∏—Ç–∞–π—Å–∫–∏–π —é–∞–Ω—å)</h4>
                </div>
                <p>–í–∞–ª—é—Ç–∞ —Å —É–ø—Ä–∞–≤–ª—è–µ–º—ã–º –∫—É—Ä—Å–æ–º. –í–∞–∂–Ω–∞ –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏ —Å –ê–∑–∏–µ–π.</p>
                <div class="currency-details">
                    <span>üîπ –ö–æ–Ω—Ç—Ä–æ–ª—å –¶–ë –ö–∏—Ç–∞—è</span>
                    <span>üîπ –í–ª–∏—è–µ—Ç –Ω–∞ —ç–∫—Å–ø–æ—Ä—Ç</span>
                </div>
            </div>

            <!-- BTC -->
            <div class="currency-card btc">
                <div class="currency-header">
                    <span class="currency-icon">üÖ±</span>
                    <h4>BTC (–ë–∏—Ç–∫–æ–∏–Ω)</h4>
                </div>
                <p>–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π —ç–º–∏—Å—Å–∏–µ–π. –í—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å.</p>
                <div class="currency-details">
                    <span>üîπ –î–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω</span>
                    <span>üîπ –ú–∞–∫—Å–∏–º—É–º: 21 –º–ª–Ω</span>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
